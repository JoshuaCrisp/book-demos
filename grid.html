<!DOCTYPE html>
<html>
  <head>
    <title>The Scene Graph</title>
    <meta charset="UTF-8">
    <meta name="description" content="Understanding the Scene Graph">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v3.13.1/dist/aframe-extras.js"></script>
    <script src ="resources/start.js"></script>
    <script src ="resources/gridify-plane.js"></script>
    <script src ="resources/gridify-buttons.js"></script>
    <script src ="resources/make-primitives.js"></script>
    <script src ="resources/add-button-caller.js"></script>
    <script src ="resources/geometry-button-caller.js"></script>
    <script src ="resources/color-button-caller.js"></script>
    <script src ="resources/manipulation-button-caller.js"></script>
    <script src ="resources/model-opacity.js"></script>
    <script src ="resources/jay-caller.js"></script>
    <script src ="resources/object-moveable.js"></script>
    <script src ="resources/scale-on-drag.js"></script>
    <script src ="resources/rotate-on-drag.js"></script>
    <script src ="resources/audio-cue.js"></script>
    <script src ="resources/done-button.js"></script>

    <!-- This file contains the global variables referenced throughout many of the other .js files -->
    <script src ="resources/scene-tracker.js"></script>

  </head>

  <body>

      
    <!-- The cursor uses the mouse instead of a fuse cursor. The "add-button-caller" component
    is where all the scene logic starts. Start there when reading the javascript files.-->
    <a-scene cursor="rayOrigin: mouse" id="scene" add-button-caller>

        <a-assets>
            <!-- images -->
            <img id="sutherland" src="assets/sutherland.png">
            <img id="damocles" src="assets/sword-of-damocles.png">
            <img id="gridSquare-white" src="assets/textures/gridSquare.png">
            <img id="gridSquare-red" src="assets/textures/gridSquare-red.png">
            <img id="addGeoBtn" src="assets/buttons/addGeoButton.png">
            <img id="doneBtn" src="assets/buttons/done-button.png">
            <img id="handles-bg-png" src="assets/buttons/handles/handleBG.png">
            <img id="nodeImg" src="assets/node-view.png">
            <img id="triangles" src="assets/0-triangles.png">
            <img id="plato" src="assets/1-Plato.png">
            <img id="solid" src="assets/2-platonic-solids.png">
            <img id="animal" src="assets/3-animal.png">

            <!-- gltf models -->
            <a-asset-item id="JayBolter-gltf" src="assets/models/JayBolter.gltf"></a-asset-item>
            <a-asset-item id="arrow-red" src="assets/models/arrow-red.gltf"></a-asset-item>
            <a-asset-item id="arrow-blue" src="assets/models/arrow-green.gltf"></a-asset-item>
            <a-asset-item id="arrow-green" src="assets/models/arrow-blue.gltf"></a-asset-item>
            <a-asset-item id="coin-red" src="assets/models/coin-red.gltf"></a-asset-item>
            <a-asset-item id="coin-blue" src="assets/models/coin-blue.gltf"></a-asset-item>
            <a-asset-item id="coin-green" src="assets/models/coin-green.gltf"></a-asset-item>
            <a-asset-item id="camcorder" src="assets/models/camcorder.gltf"></a-asset-item>

            <!-- Spoken audio tracks -->
            <audio id = "created" src="assets/audio/speech-created.m4a" preload></audio>
            <audio id = "geometry" src="assets/audio/speech-geometry.m4a" preload></audio>
            <audio id = "manipulation" src="assets/audio/speech-manipulate.m4a" preload></audio>
            <audio id = "material" src="assets/audio/speech-material.m4a" preload></audio>
            <audio id = "placement-xz" src="assets/audio/speech-placement-xz.m4a" preload></audio>
            <audio id = "placement-y" src="assets/audio/speech-placement-y.m4a" preload></audio>
            <audio id = "rotation" src="assets/audio/speech-rotation.m4a" preload></audio>
            <audio id = "scale" src="assets/audio/speech-scale.m4a" preload></audio>
            <audio id = "welcome" src="assets/audio/speech-welcome.m4a" preload></audio>
            <audio id = "done" src="assets/audio/speech-scenegraph.m4a" preload></audio>
            <audio id = "notyet" src="assets/audio/speech-notyet.m4a" preload></audio>
          </a-assets>

      <!-- The camera is embedded in another a-entity so that it can be moved by code -->
      <a-entity id = "camera"> 
        <a-camera></a-camera>
      </a-entity>

      <!-- White background -->
      <a-sky color = "#ffffff"></a-sky>
      
      <!-- Model of Jay starts off with an opacity of 0. All spoken tracks are applied to his sound component -->
      <a-gltf-model src="#JayBolter-gltf"
        id ="jayModel"
        model-opacity= "0"
        scale = "1.5 1.5 1.5"
        position="-6 -1 -16"
        rotation = "0 30 0"
        animation-mixer="clip: idle; crossFadeDuration:1;"
        sound="src: #welcome; autoplay: false; refDistance: 10;">
      </a-gltf-model>

      <!-- Plane representing the scene graph. Has a copy of Jay Bolter and the Camera model added by Default -->
      <a-plane id = "scene-graph" src="#nodeImg" height = "18" width = "32" position = "0 9.5 -18" visible="false">
          <a-gltf-model src="#JayBolter-gltf" id ="graph-jay" scale = "1.5 1.5 1.5" position="-13 2 0"></a-gltf-model>
          <a-gltf-model src="#camcorder" id ="graph-camcorder" scale = "1.5 1.5 1.5" position="-9.5 4 0" rotation = "0 -90 0"></a-gltf-model> 
      </a-plane>

      <!-- The camera model sits at the user camera position, and is invisible by default -->
      <a-gltf-model src="#camcorder" id ="scene-camcorder" scale = "0.5 0.5 0.5" position="0.14 1.26 0" model-opacity= "0" visible ="false"></a-gltf-model>

      <!-- The floor is a 40x40 grid of a-planes -->
      <a-entity id="floor" class = "button" gridify-plane = "height: 1; width:1; rows:40; columns:40; src: #gridSquare-white;" rotation = "-90 0 0" position = "0 -1 0"></a-entity>

    </a-scene>
    
  </body>
</html>
