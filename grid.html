<html>
  <head>
    <title>The Scene Graph</title>
    <meta name="description" content="Understanding the Scene Graph">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v3.13.1/dist/aframe-extras.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
    <script src ="resources/gridify-plane.js"></script>
    <script src ="resources/gridify-buttons.js"></script>
    <script src ="resources/follow-rotation.js"></script>
    <script src ="resources/make-primitives.js"></script>
    <script src ="resources/geometry-button-caller.js"></script>
    <script src ="resources/material-button-caller.js"></script>
    <script src ="resources/color-button-caller.js"></script>
    <script src ="resources/manipulation-button-caller.js"></script>
    <script src ="resources/visibility-on-x.js"></script>
    <script src ="resources/model-opacity.js"></script>
    <script src ="resources/jay-caller.js"></script>
    <script src ="resources/look-trigger.js"></script>
    <script src ="resources/object-rotatable.js"></script>
    <script src ="resources/object-scaleable.js"></script>
    <script src ="resources/object-moveable.js"></script>

  </head>

  <body>

      

    <a-scene id="scene">

        <a-assets>
            <img id="gridSquare-white" src="assets/textures/gridSquare.png">
            <img id="gridSquare-red" src="assets/textures/gridSquare-red.png">
            <img id="addGeoBtn" src="assets/buttons/addGeoButton.png">
            <img id="handles-bg-png" src="assets/buttons/handles/handleBG.png">
            <img id="handle-xu" src="assets/buttons/handles/handle_x_u.png">
            <img id="handle-xs" src="assets/buttons/handles/handle_x_s.png">
            <img id="handle-yu" src="assets/buttons/handles/handle_y_u.png">
            <img id="handle-ys" src="assets/buttons/handles/handle_y_s.png">
            <img id="handle-zu" src="assets/buttons/handles/handle_z_u.png">
            <img id="handle-zs" src="assets/buttons/handles/handle_x_s.png">
            <img id="nodeImg" src="assets/node-view.png">
            <img id="nodeImg2" src="assets/node-view2.png">
            <a-asset-item id="JayBolter-gltf" src="assets/models/JayBolter.gltf"></a-asset-item>
            <audio id = "add" src="assets/audio/speech-add.m4a" preload></audio>
            <audio id = "end" src="assets/audio/speech-end.m4a" preload></audio>
            <audio id = "geometry" src="assets/audio/speech-geometry.m4a" preload></audio>
            <audio id = "manipulation" src="assets/audio/speech-manipulate.m4a" preload></audio>
            <audio id = "material" src="assets/audio/speech-material.m4a" preload></audio>
            <audio id = "placement" src="assets/audio/speech-placement.m4a" preload></audio>
            <audio id = "rotation" src="assets/audio/speech-rotation.m4a" preload></audio>
            <audio id = "scale" src="assets/audio/speech-scale.m4a" preload></audio>
            <audio id = "welcome" src="assets/audio/speech-welcome.m4a" preload></audio>
            
          </a-assets>

      <a-camera id = "camera"> 
          <a-plane visibility-on-x color id = "node-portol"  material ="shader:flat; src: #nodeImg"  width = "16" height = "9"  scale = "1.5 1.5 1.5" position = " 0 0 -12" opacity = "0" side = "double"></a-plane>

        <a-cursor 
                  raycaster="id: raycaster; far: 100; objects: .button, .manipulator;">

                  <a-animation begin="click"
                               easing="ease-in"
                               attribute="scale" dur="150"
                               fill="forwards"
                               from="0.1 0.1 0.1"
                               to="1 1 1">
                  </a-animation>
                  <a-animation begin="cursor-fusing"
                               easing="linear"
                               attribute="scale"
                               delay = "1000"
                               dur="500"
                               fill="forwards"
                               from="1 1 1"
                               to="0.1 0.1 0.1">
                  </a-animation>

        </a-cursor>

      </a-camera>

      <a-sky color = "#ffffff"></a-sky>
      <a-entity id="floor" class = "button" gridify-plane = "height: 1; width:1; rows:40; columns:40; src: #gridSquare-white;" rotation = "-90 0 0" position = "0 -1 0"></a-entity>

      <a-plane
        id = "addBtn"
        class = "button"
        src= "#addGeoBtn"
        transparency= "true"
        material = "alphaTest:0.20;"
        opacity= "1"
        position="0, 1, -5"
        jay-caller
                    >
          <a-text 
            id = "btnText"
            value = "click to start"
            align = "center"
            color = "#2b2b2b"
            position = "0 -0.6 0">
          </a-text>
        </a-plane>

        <a-entity  gridify-buttons = "class: geometry-button; btnCount: 5; btnWidth: 1;  columns: 2; btnHeight: 1; spacing: 0.1; url:assets/buttons/geometryBtns/; imagebase: geometryButton"
                    id = "geoButtonGrid"
                    class = "button"
                    make-primitives
                    visible = "false"
                    position = " 4 1.273 -5"
                    scale  = " 0.8 0.8 0.8">
        </a-entity>


      
      <a-gltf-model src="#JayBolter-gltf"
        id ="jayModel"
        model-opacity= "0"
        scale = "1.5 1.5 1.5"
        position="0 -1 -3"
        rotation = "0 0 0"
        animation-mixer="clip: idle; crossFadeDuration:1;"
        sound="src:#welcome; autoplay: false">
      </a-gltf-model>

    </a-scene>

  </body>
</html>
